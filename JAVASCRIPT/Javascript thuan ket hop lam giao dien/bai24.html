<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài 24 - Tạo khung trang web cho Kênh 14</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        .banner{
            position: relative;
            width: 100%;
            height: 100px;
            background-color: teal;
            z-index: 3;
        }

        .menuTren{
            position: relative;
            left: 0%;
            top: 0%;
            width: 100%;
            height: auto;
            background-color: yellow;
            padding: 10px;
            padding-left: 200px;
        }
        .menuTren a{
            text-decoration: none;
            margin-right: 30px;
            font-size: 20px;
            color:lightseagreen;
            font-weight: bold;
        }
        
        .itemNoiDungTrai, .itemNoiDungPhai{
            position: relative;
            top: 0%;
            left: 0%;
            width: 90%;
            height: 300px;
            margin-bottom: 20px;
            background-color: darkorange;
            border-radius: 5px;
        }
        .itemNoiDungPhai{
            height: 700px;
            
        }

        .menuTren.ghimLenTren{
            position: fixed;
            width: 100%;
            top: 0%;
            z-index: 3;
            background-color: green;
        }

        .itemNoiDungPhai.giua.dungyen{
            position: fixed;
            top: 50px;
            width: 320px;
            height: 700px;
            left: 960px;
            z-index: 3;
        }

        .load_1{
            opacity: 0;
        }
        .load_1.traiDiVao{
            animation: traiDiVao 1s ease forwards;
        }
        @-webkit-keyframes traiDiVao{
            from {transform: translateX(-100%); opacity: 0;}
            to {transform: translateX(0%); opacity: 1;}
        }
        
    </style>
</head>
<body>
    <div class="banner">

    </div>
    <div class="menuTren">
        <a href="">Link 1</a>
        <a href="">Link 2</a>
        <a href="">Link 3</a>
        <a href="">Link 4</a>
        <a href="">Link 5</a>
        <a href="">Link 6</a>
    </div>
    <br>
    <section class="noidung">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <div class="itemNoiDungTrai "></div>
                    <div class="itemNoiDungTrai load_1"></div>
                    <div class="itemNoiDungTrai "></div>
                    <div class="itemNoiDungTrai load_1"></div>
                    <div class="itemNoiDungTrai "></div>
                    <div class="itemNoiDungTrai load_1"></div>
                    <div class="itemNoiDungTrai "></div>
                    <div class="itemNoiDungTrai "></div>
                </div>
                <div class="col-md-4">
                    <div style="background-color: blue;" class="itemNoiDungPhai tren">
                        
                            <h3 class="text-center">Tôi là số 1</h3>
                        
                    </div>
                    <div style="background-color: chartreuse;" class="itemNoiDungPhai giua">
                        
                            <h3 class="text-center">Bạn là số 2</h3>
                        
                    </div>
                    <div style="background-color: deeppink;" class="itemNoiDungPhai duoi">
                        
                            <h3 class="text-center">Tôi giỏi hơn bạn</h3>
                        
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        document.addEventListener("DOMContentLoaded", function(){
            var menuTren = document.querySelector(".menuTren");
            var trangThaiMenuTren = "duoi100";

            var banLaSo2 = document.querySelector(".giua");
            var viTriBanLaSo2 = banLaSo2.offsetTop;
            var trangThaiBanLaSo2 = "duoi";

            var chanCuoi = viTriBanLaSo2 + 600; // đây là tham số bạn có thể chỉnh tùy ý

            
            window.addEventListener("scroll", function(){
                // hiệu ứng ghim menu
                if(window.pageYOffset > 100) // vị trí scroll theo trục Oy
                {
                    if(trangThaiMenuTren == "duoi100")
                    {
                        trangThaiMenuTren = "tren100";
                        menuTren.classList.add("ghimLenTren");
                    }
                }
                else if(window.pageYOffset < 100) // vị trí scroll theo trục Oy
                {
                    if(trangThaiMenuTren == "tren100")
                    {
                        trangThaiMenuTren = "duoi100";
                        menuTren.classList.remove("ghimLenTren");
                    }
                }


                // hiệu ứng đứng lại một đoạn của thẻ BanLaSo2
                if(window.pageYOffset > viTriBanLaSo2 && window.pageYOffset < chanCuoi)
                {
                    if(trangThaiBanLaSo2 == "duoi")
                    {
                        banLaSo2.classList.add("dungyen");
                        trangThaiBanLaSo2 = "dangHienThi";
                    }
                }
                else if(window.pageYOffset < viTriBanLaSo2 || window.pageYOffset > chanCuoi) // vị trí scroll theo trục Oy
                {
                    if(trangThaiBanLaSo2 == "dangHienThi")
                    {
                        banLaSo2.classList.remove("dungyen");
                        trangThaiBanLaSo2 = "duoi";
                        
                    }
                }

                // hiệu ứng load đơn giản
                var listPhanTuLoad_1 = document.querySelectorAll(".load_1"); // danh sách các thẻ có class load_1
                
                for(var i = 0; i < listPhanTuLoad_1.length; i++)
                {
                    var viTriPhanTuLoad_1 = listPhanTuLoad_1[i].offsetTop - 400; //mình chọn load trước 150
                    var trangThaiLoadCuaLoad_1 = "duoi";

                    if(window.pageYOffset > viTriPhanTuLoad_1)
                    {
                        console.log("kk");
                        if(trangThaiLoadCuaLoad_1 == "duoi")
                        {
                            listPhanTuLoad_1[i].classList.add("traiDiVao"); // tất cả phần tử load_1 từ trái đi vào
                            trangThaiLoadCuaLoad_1 = "dangHienThi";
                            trangThaiLoadCuaLoad_1[i+1] = "duoi";
                        }
                    }
                }
                
            });



        }, false)
    </script>
</body>
</html>